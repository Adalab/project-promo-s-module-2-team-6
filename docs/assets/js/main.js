"use strict";let data={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};const designLegend=document.querySelector(".js-designLegend"),divDesign=document.querySelector(".js-divDesign"),fillLegend=document.querySelector(".js-fillLegend"),divFill=document.querySelector(".js-divFill"),shareLegend=document.querySelector(".js-shareLegend"),divShare=document.querySelector(".js-divShare"),arrowDesign=document.querySelector(".js-arrow-design"),arrowFill=document.querySelector(".js-arrow-fill"),arrowShare=document.querySelector(".js-arrow-share");function closeAlldiv(){divDesign.classList.add("collapsed"),divFill.classList.add("collapsed"),divShare.classList.add("collapsed"),arrowDesign.classList.remove("arrow-collapsed"),arrowFill.classList.remove("arrow-collapsed"),arrowShare.classList.remove("arrow-collapsed")}function openDesign(){divDesign.classList.remove("collapsed"),arrowDesign.classList.add("arrow-collapsed")}function openFill(){divFill.classList.remove("collapsed"),arrowFill.classList.add("arrow-collapsed")}function openShare(){divShare.classList.remove("collapsed"),arrowShare.classList.add("arrow-collapsed"),document.getElementById("upArrow").scrollIntoView({behavior:"smooth"})}function handleClikDesign(e){console.log(e.currentTarget),closeAlldiv(),openDesign()}designLegend.addEventListener("click",handleClikDesign);const handleClikFill=e=>{console.log("click"),closeAlldiv(),openFill(),arrowShare.classList.toggle("arrow-collapsed")};function handleClikShare(e){console.log("click"),closeAlldiv(),openShare(),arrowShare.classList.toggle("arrow-collapsed")}fillLegend.addEventListener("click",handleClikFill),shareLegend.addEventListener("click",handleClikShare);const inputName=document.querySelector(".js-inputName"),cardName=document.querySelector(".js-cardName"),inputJob=document.querySelector(".js-inputJob"),cardJob=document.querySelector(".js-cardJob"),inputEmail=document.querySelector(".js-inputEmail"),cardEmail=document.querySelector(".js-cardEmail"),inputPhone=document.querySelector(".js-inputPhone"),cardPhone=document.querySelector(".js-cardPhone"),inputLinkedin=document.querySelector(".js-inputLinkedin"),cardLinkedin=document.querySelector(".js-cardLinkedin"),inputGithub=document.querySelector(".js-inputGithub"),cardGithub=document.querySelector(".js-cardGithub");let nameLocal=localStorage.getItem("CardName");console.log(nameLocal),inputName.value=nameLocal,nameLocal&&(cardName.innerHTML=nameLocal,data.name=nameLocal);let jobLocal=localStorage.getItem("CardJob");inputJob.value=jobLocal,jobLocal&&(cardJob.innerHTML=jobLocal,data.job=jobLocal);let LinkedinLocal=localStorage.getItem("CardLinkedin");LinkedinLocal&&(inputLinkedin.value=LinkedinLocal,data.linkedin=LinkedinLocal.slice(16,100));let phoneLocal=localStorage.getItem("CardPhone");phoneLocal&&(inputPhone.value=phoneLocal,data.phone=phoneLocal);let emailLocal=localStorage.getItem("CardEmail");emailLocal&&(inputEmail.value=emailLocal,data.email=emailLocal);let githubLocal=localStorage.getItem("CardGithub");githubLocal&&(inputGithub.value=githubLocal,data.github=githubLocal.slice(1,50)),inputName.addEventListener("input",()=>{const e=inputName.value;""===e?cardName.innerHTML="Nombre Apellido":(cardName.innerHTML=e,data.name=e,localStorage.setItem("CardName",e))}),inputJob.addEventListener("input",()=>{const e=inputJob.value;""===e?cardJob.innerHTML="Front-end developer":(cardJob.innerHTML=e,data.job=e,localStorage.setItem("CardJob",e))}),inputEmail.addEventListener("input",()=>{const e=inputEmail.value;cardEmail.href="mailto:"+e,data.email=e,localStorage.setItem("CardEmail",e)}),inputLinkedin.addEventListener("input",()=>{const e=inputLinkedin.value;let t=e.lastIndexOf("/"),a=e.slice(t+1);data.linkedin=a,cardLinkedin.href="https://www.linkedin.com/in/"+data.linkedin,localStorage.setItem("CardLinkedin",e),console.log(cardLinkedin)}),inputGithub.addEventListener("input",()=>{const e=inputGithub.value;cardGithub.href="https://github.com/"+e.slice(1,50),data.github=e.slice(1,50),localStorage.setItem("CardGithub",e)}),inputPhone.addEventListener("input",()=>{const e=inputPhone.value;cardPhone.href="tel:"+e,data.phone=e,localStorage.setItem("CardPhone",e)});const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}fileField.addEventListener("change",getImage);const option1=document.querySelector(".js-option1"),option2=document.querySelector(".js-option2"),option3=document.querySelector(".js-option3"),option4=document.querySelector(".js-option4"),allcard=document.querySelector(".js-allcard");function removepalette(){allcard.classList.remove("palette1"),allcard.classList.remove("palette2"),allcard.classList.remove("palette3"),allcard.classList.remove("palette4")}function handleclik1(){removepalette(),allcard.classList.add("palette1"),data.palette="1"}function handleclik2(){removepalette(),allcard.classList.add("palette2"),data.palette="2"}function handleclik3(){removepalette(),allcard.classList.add("palette3"),data.palette="3"}function handleclik4(){removepalette(),allcard.classList.add("palette4"),data.palette="4"}option1.addEventListener("click",handleclik1),option2.addEventListener("click",handleclik2),option3.addEventListener("click",handleclik3),option4.addEventListener("click",handleclik4);const buttonCard=document.querySelector(".js__buttonCard"),createLink=document.querySelector(".js__createLink"),urlCard=document.querySelector(".js__url");function handleClickCard(e){e.preventDefault(),dataFetch()}buttonCard.addEventListener("click",handleClickCard);const msjError=document.querySelector(".js-msjError"),btnTwitter=document.querySelector(".js-btnTwitter");function dataFetch(){fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{console.log(e),!1===e.success?msjError.innerHTML="* Te faltan datos por rellenar <br> * Recuerda la foto debe ser menor a 120Kb ":(msjError.innerHTML="",buttonCard.classList.add("collapsed"),createLink.classList.remove("collapsed"),urlCard.href=e.cardURL,urlCard.innerHTML=e.cardURL,btnTwitter.href="https://twitter.com/intent/tweet?text=This%20is%20my%20bussiness%20card:&url="+e.cardURL)})}console.log(data);const reset=document.querySelector(".js-reset");function handleClickReset(e){e.preventDefault(),console.log("click reset"),inputName.value="",cardName.innerHTML="Nombre Apellido",inputJob.value="",cardJob.innerHTML="Front-end developer",inputEmail.value="",inputLinkedin.value="",inputGithub.value="",inputPhone.value="",profilePreview.style.backgroundImage="",profileImage.style.backgroundImage="",localStorage.removeItem("CardPhone"),localStorage.removeItem("CardGithub"),localStorage.removeItem("CardLinkedin"),localStorage.removeItem("CardEmail"),localStorage.removeItem("CardJob"),localStorage.removeItem("CardName")}reset.addEventListener("click",handleClickReset);